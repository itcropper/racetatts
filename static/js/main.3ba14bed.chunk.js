(this.webpackJsonpracestatts=this.webpackJsonpracestatts||[]).push([[0],{221:function(e,t,n){},224:function(e,t){},334:function(e,t,n){},335:function(e,t,n){},336:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(105),s=n.n(r),i=(n(221),n(4)),l=n(3),o=function(){return Object(l.jsxs)("header",{className:"mb-10 px-10",children:[Object(l.jsx)("h1",{className:"text-4xl",children:"RaceTats"}),Object(l.jsx)("p",{className:"py-4",children:"Upload your race file to create a custom elevation profile."}),Object(l.jsx)("p",{className:"py-4",children:"Then we send you a temporary tatoo for you to use on race day!"})]})},u=n(6),d=n(106),b=n.n(d),j=function(e){var t=e.pt1,n=e.pt2;return f(t.lat,t.lon,n.lat,n.lon)},f=function(e,t,n,a){var c=h(n-e),r=h(a-t);e=h(e),n=h(n);var s=Math.sin(c/2)*Math.sin(c/2)+Math.sin(r/2)*Math.sin(r/2)*Math.cos(e)*Math.cos(n);return 6371*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))},h=function(e){return e*Math.PI/180},x=n(37),m=n(63),O=function(e){var t=e.distance,n=void 0===t?0:t,c=e.size,r=void 0===c?0:c,s=e.color,o=void 0===s?"#000000":s,u=e.id,d=e.onUpdate,b=Object(a.useState)(n),j=Object(i.a)(b,2),f=j[0],h=j[1],m=Object(a.useState)(r),O=Object(i.a)(m,2),p=O[0],g=O[1],v=Object(a.useState)(o),y=Object(i.a)(v,2),w=y[0],N=y[1];return Object(a.useEffect)((function(){JSON.stringify({distance:f,size:p,color:w,id:u})!==JSON.stringify({distance:n,size:r,color:o,id:u})&&d({distance:f,size:p,color:w,id:u})}),[f,p,w,u,d]),Object(l.jsxs)("div",{className:"aid-station-row mb-4 items-center flex flex-row ",children:[Object(l.jsxs)("div",{className:"flex flex-col",children:[Object(l.jsxs)("div",{className:"flex flex-row",children:[Object(l.jsx)("input",{className:"py-2 pl-4 w-6/12 mr-2 focus:border-light-blue-500 focus:ring-1 focus:ring-light-blue-500 focus:outline-none w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md",type:"number",placeholder:"Distance",name:"aid-station-distance",onChange:function(e){return h(e.currentTarget.value)}}),Object(l.jsx)("input",{className:"py-2 pl-4 w-2/12 mr-2 focus:border-light-blue-500 focus:ring-1 focus:ring-light-blue-500 focus:outline-none w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md",type:"number",placeholder:"Size",name:"aid-station-size",onChange:function(e){return g(e.currentTarget.value)}})]}),Object(l.jsx)(x.a,{name:"aid-station-color",circleSpacing:20,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5"],className:"circle-picker w-full mr-2 flex justify-between h-20 items-center",value:w,onChange:function(e){return N(e.hex)}})]}),Object(l.jsx)("button",{className:"w-1/12",children:"X"})]})},p=function(e){var t=e.updateStations,n={distance:0,size:1,color:"#000000",id:0},c=Object(a.useState)([n]),r=Object(i.a)(c,2),s=r[0],o=r[1];Object(a.useEffect)((function(){t(s)}),[JSON.stringify(s)]);var d=function(e){if(e){var t=s.find((function(t){return t.id===e.id}));if(n=t,a=e,JSON.stringify(n)!==JSON.stringify(a)){var n,a,c=s.findIndex((function(t){return t.id===e.id}));if(t){var r=Object(u.a)(Object(u.a)({},t),e);s[c]=r;var i=Object(m.a)(s);o(i)}}}};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("p",{className:"text-xl mb-2",children:"Include Aid Stations"}),Object(l.jsx)("div",{className:"aid-stations-container",children:s.map((function(e,t){return Object(l.jsx)(O,{station:e,id:t,onUpdate:d},t)}))}),Object(l.jsx)("button",{className:"add-aid-station whitespace-nowrap inline-flex rounded-md bg-blue-500 py-2 px-3 text-xs font-semibold uppercase text-white hover:bg-opacity-90",onClick:function(e){var t=s.length?Object(u.a)(Object(u.a)({},s.slice(-1)[0]),{},{id:s.length}):n;o([].concat(Object(m.a)(s),[t]))},children:"+ Aid Station"})]})},g=function(e){var t=e.onUpload,n=e.customs,c=e.setCustoms,r=e.updateAidStations,s=Object(a.useState)(null),o=Object(i.a)(s,2),d=(o[0],o[1],Object(a.useState)("")),f=Object(i.a)(d,2),h=(f[0],f[1],Object(a.useState)(3)),m=Object(i.a)(h,2),O=(m[0],m[1],Object(a.useState)(n.lineColor||"#9c27b0")),g=Object(i.a)(O,2),v=(g[0],g[1],Object(a.useState)(!0)),y=Object(i.a)(v,2),w=(y[0],y[1],Object(a.useState)(!0)),N=Object(i.a)(w,2),S=(N[0],N[1],Object(a.useState)(n)),k=Object(i.a)(S,2),z=k[0],C=k[1];return Object(a.useEffect)((function(){c(z)}),[z]),Object(l.jsxs)("div",{className:"w-11/12 px-2 shadow-xl h-full",children:[Object(l.jsx)("h2",{className:"text-3xl",children:"Customize"}),Object(l.jsxs)("div",{className:"customize-field my-4",children:[Object(l.jsx)("p",{className:"text-xl  mb-2",children:"Upload File"}),Object(l.jsx)("input",{name:"gps-file",onChange:function(e){var n=e.currentTarget.files[0],a=new FileReader;a.addEventListener("load",(function(e){t(function(e){var t=(new DOMParser).parseFromString(e,"text/xml"),n=b.a.gpx(t).features[0].geometry.coordinates.map((function(e,t,n){return{index:t,elevation:e[2],distance:0,segmentLength:0===t?0:j({pt1:{lat:n[t][0],lon:n[t][1]},pt2:{lat:n[t-1][0],lon:n[t-1][1]}})}}));return n.forEach((function(e,t,n){return e.distance=e.segmentLength+(0===t?0:n[t-1].distance)})),n.map((function(e,t,n){var a=n[t].distance,c=.621371*a;return Object(u.a)(Object(u.a)({},e),{},{distance:{km:parseFloat(a.toFixed(3)),miles:parseFloat(c.toFixed(3))}})}))}(e.target.result))})),a.readAsText(n)},className:"focus:border-light-blue-500 focus:ring-1 focus:ring-light-blue-500 focus:outline-none w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-4",type:"file",placeholder:"race.gpx",accept:".gpx, .kml"})]}),Object(l.jsxs)("div",{className:"customize-field my-4",children:[Object(l.jsx)("p",{className:"text-xl  mb-2",children:"Title"}),Object(l.jsx)("input",{name:"chart-title",className:"focus:border-light-blue-500 focus:ring-1 focus:ring-light-blue-500 focus:outline-none w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-4",type:"text",placeholder:"Crush It!",onKeyUp:function(e){return C(Object(u.a)(Object(u.a)({},z),{},{title:e.currentTarget.value}))}})]}),Object(l.jsxs)("div",{className:"customize-field my-4",children:[Object(l.jsx)("p",{className:"text-xl  mb-2",children:"Line Color"}),Object(l.jsx)(x.a,{onChange:function(e){return C(Object(u.a)(Object(u.a)({},z),{},{lineColor:e.hex}))}})]}),Object(l.jsxs)("div",{className:"customize-field my-4",children:[Object(l.jsx)("p",{className:"text-xl  mb-2",children:"Line Width"}),Object(l.jsx)("input",{name:"line-width",className:"focus:border-light-blue-500 focus:ring-1 focus:ring-light-blue-500 focus:outline-none w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-4",type:"number",placeholder:"3",onChange:function(e){return C(Object(u.a)(Object(u.a)({},z),{},{lineWidth:e.currentTarget.value}))}})]}),Object(l.jsxs)("div",{className:"customize-field my-4 ",children:[Object(l.jsx)("p",{className:"text-xl mb-2",children:"Show Elevation Axis"}),Object(l.jsx)("input",{type:"checkbox",name:"show-elevation-axis",value:"yes",className:"opacity-0 absolute h-8 w-8",checked:z.showElevationLines,onChange:function(e){return C(Object(u.a)(Object(u.a)({},z),{},{showElevationLines:e.target.checked}))}}),Object(l.jsx)("div",{className:"bg-white border-2 rounded-md border-blue-400 w-8 h-8 flex flex-shrink-0 justify-center items-center mr-2 focus-within:border-blue-500",children:Object(l.jsx)("svg",{className:"fill-current hidden w-3 h-3 text-blue-600 pointer-events-none",version:"1.1",viewBox:"0 0 17 12",xmlns:"http://www.w3.org/2000/svg",children:Object(l.jsx)("g",{fill:"none",fillRule:"evenodd",children:Object(l.jsx)("g",{transform:"translate(-9 -11)",fill:"#1F73F1",fillRule:"nonzero",children:Object(l.jsx)("path",{d:"m25.576 11.414c0.56558 0.55188 0.56558 1.4439 0 1.9961l-9.404 9.176c-0.28213 0.27529-0.65247 0.41385-1.0228 0.41385-0.37034 0-0.74068-0.13855-1.0228-0.41385l-4.7019-4.588c-0.56584-0.55188-0.56584-1.4442 0-1.9961 0.56558-0.55214 1.4798-0.55214 2.0456 0l3.679 3.5899 8.3812-8.1779c0.56558-0.55214 1.4798-0.55214 2.0456 0z"})})})})}),Object(l.jsxs)("div",{className:"customize-field my-4 ",children:[Object(l.jsx)("p",{className:"text-xl mb-2",children:"Show Distance Axis"}),Object(l.jsx)("input",{type:"checkbox",name:"show-distance-axis",value:"yes",className:"opacity-0 absolute h-8 w-8",checked:z.showDistanceLines,onChange:function(e){return C(Object(u.a)(Object(u.a)({},z),{},{showDistanceLines:e.target.checked}))}}),Object(l.jsx)("div",{className:"bg-white border-2 rounded-md border-blue-400 w-8 h-8 flex flex-shrink-0 justify-center items-center mr-2 focus-within:border-blue-500",children:Object(l.jsx)("svg",{className:"fill-current hidden w-3 h-3 text-blue-600 pointer-events-none",version:"1.1",viewBox:"0 0 17 12",xmlns:"http://www.w3.org/2000/svg",children:Object(l.jsx)("g",{fill:"none",fillRule:"evenodd",children:Object(l.jsx)("g",{transform:"translate(-9 -11)",fill:"#1F73F1",fillRule:"nonzero",children:Object(l.jsx)("path",{d:"m25.576 11.414c0.56558 0.55188 0.56558 1.4439 0 1.9961l-9.404 9.176c-0.28213 0.27529-0.65247 0.41385-1.0228 0.41385-0.37034 0-0.74068-0.13855-1.0228-0.41385l-4.7019-4.588c-0.56584-0.55188-0.56584-1.4442 0-1.9961 0.56558-0.55214 1.4798-0.55214 2.0456 0l3.679 3.5899 8.3812-8.1779c0.56558-0.55214 1.4798-0.55214 2.0456 0z"})})})})}),Object(l.jsxs)("div",{className:"customize-field my-4",children:[Object(l.jsx)("p",{className:"text-xl  mb-2",children:"Font Size"}),Object(l.jsx)("input",{className:"focus:border-light-blue-500 focus:ring-1 focus:ring-light-blue-500 focus:outline-none w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-4",type:"Number"})]}),Object(l.jsxs)("div",{className:"customize-field my-4 ",children:[Object(l.jsx)("p",{className:"text-xl mb-2",children:"Units"}),Object(l.jsxs)("div",{className:"flex justify-around flex-col pl-8",children:[Object(l.jsxs)("div",{className:"flex flex-row items-baseline",children:[Object(l.jsx)("input",{id:"unit-standard",className:"",type:"radio",name:"unit",value:"standard",checked:!0,onChange:function(){}}),Object(l.jsx)("label",{htmlFor:"unit-standard",className:"pl-2 mb-1 text-lg",children:"Standard"})]}),Object(l.jsxs)("div",{className:"flex flex-row items-baseline",children:[Object(l.jsx)("input",{id:"unit-metric",className:"",type:"radio",name:"unit",value:"metric",checked:!0,onChange:function(){}}),Object(l.jsx)("label",{htmlFor:"unit-metric",className:"pl-2 mb-1 text-lg",children:"Metric"})]})]})]}),Object(l.jsx)("div",{className:"customize-field my-4",children:Object(l.jsx)(p,{updateStations:r})})]})]})]})},v=n(7),y=(n(334),800),w=function(e){var t,n,c=e.elevationData,r=e.onChartLoad,s=e.aidStations,o=e.customs,u=Object(a.useRef)(null),d=Object(a.useState)({top:20,right:50,bottom:30,left:50}),b=Object(i.a)(d,2),j=b[0],f=(b[1],Object(a.useState)(0)),h=Object(i.a)(f,2),x=h[0],m=h[1],O=Object(a.useState)(0),p=Object(i.a)(O,2),g=p[0],w=p[1],N=Object(a.useState)(null),S=Object(i.a)(N,2),k=S[0],z=S[1],C=Object(a.useState)(o.lineColor||"#ff0000ad"),E=Object(i.a)(C,2),L=E[0],F=E[1],M=Object(a.useState)(o.lineWidth||3),T=Object(i.a)(M,2),D=T[0],J=T[1],A=Object(a.useState)(o.title||""),R=Object(i.a)(A,2),W=R[0],I=R[1],U=Object(a.useState)(o.showElevationLines),B=Object(i.a)(U,2),G=B[0],P=B[1],q=Object(a.useState)(o.showDistanceLines),H=Object(i.a)(q,2),K=H[0],X=H[1],Q=Object(a.useState)("km"),V=Object(i.a)(Q,2),Y=V[0],Z=(V[1],Object(a.useRef)(null)),$=Object(a.useRef)(null),_=Object(a.useRef)(null);return Object(a.useEffect)((function(){$.current||($.current=Object(v.g)()),Z.current||(Z.current=Object(v.g)()),$.current.range([0,x]),Z.current.range([g,0])}),[x,g]),Object(a.useEffect)((function(){return w(parseInt(""+.3*x)-j.top-j.bottom)}),[x]),Object(a.useEffect)((function(){return m(u.current.offsetWidth-j.left-j.right)}),[]),Object(a.useEffect)((function(){s&&c&&c.length&&$.current&&Z.current&&JSON.stringify($.current.domain())!==JSON.stringify([0,1])&&JSON.stringify(Z.current.domain())!==JSON.stringify([0,1])&&s.forEach((function(e){var t="aid-station-"+parseInt(e.id),n=_.current.select("#"+t),a=_.current.select("#"+t+"--line");n.empty()&&(n=_.current.append("circle").attr("id",t)),a.empty()&&(a=_.current.append("line").attr("class","x-axis").attr("id",t+"--line"));for(var r=parseFloat(e.distance||0),s=0,i=0;i<=r&&s<c.length;)i=c[s].distance[Y],s++;var l=Math.max(parseFloat(e.size||"0"),3),o=Z.current(c[s].elevation),u=$.current(r);n.attr("cx",u).attr("cy",o).attr("r",l+"px").attr("stroke-width",l+"px").attr("fill",e.color||"#ff0000").attr("stroke",(e.color||"#ff0000")+"22"),a.attr("x1",u).attr("x2",u).attr("y1",o).attr("y2",Z.current(0)).attr("fill","none").attr("stroke",(e.color||"#ff0000")+"55").attr("stroke-width","2px").attr("stroke-dasharray","6,10")}))}),[s,c]),Object(a.useEffect)((function(){if(r(null!==c&&0!==c.length),u&&$.current&&Z.current)return _.current&&(_.current.remove(),u.current.innerHTML=""),_.current=Object(v.h)("#elevation-chart").append("svg").attr("width",x+j.left+j.right).attr("height",g+j.top+j.bottom).append("g").attr("transform","translate("+j.left+","+j.top+")"),t=Object(v.a)().scale($.current).ticks(10),n=Object(v.b)().scale(Z.current).ticks(5),c&&c.length&&function(){$.current.domain([0,Object(v.e)(c,(function(e){return e.distance["km"===Y?"km":"miles"]}))]);var e=Object(v.f)(c,(function(e){return e.elevation})),a=Object(v.e)(c,(function(e){return e.elevation}));Z.current.domain([e-.05*e,1.05*a]),_.current.append("g").attr("class","x-axis").attr("transform","translate(0,"+g+")").call(t),_.current.append("g").attr("class","y-axis").call(n),_.current.append("line").attr("class","horizontalGrid-start").attr("x1",0).attr("x2",$.current(c[c.length-1].index)).attr("y1",Z.current(c[0].elevation)).attr("y2",Z.current(c[0].elevation)).attr("fill","none").attr("stroke","black").attr("stroke-width","1px").attr("stroke-dasharray","3,3"),_.current.append("line").attr("class","horizontalGrid-lowest").attr("x1",0).attr("x2",$.current(c[c.length-1].index)).attr("y1",Z.current(Object(v.f)(c,(function(e){return e.elevation})))).attr("y2",Z.current(Object(v.f)(c,(function(e){return e.elevation})))).attr("fill","none").attr("stroke","black").attr("stroke-width","2px").attr("stroke-dasharray","2, 10"),_.current.append("text").attr("class","chart-title").attr("x",x/2).attr("text-anchor","middle").style("font-size","24px").text(W);var s=Object(v.d)().curve(v.c).x((function(e){return $.current(e.distance["km"===Y?"km":"standard"])})).y((function(e){return Z.current(e.elevation)}));k||z(_.current.append("g").append("path").datum(c).attr("d",s).attr("stroke","black").attr("stroke-width","3px").attr("fill","none").attr("class","elevation-path"));r(!0)}(),function(){_.current.remove(),u.current.innerHTML=""}}),[c]),Object(a.useEffect)((function(){Object(v.h)(".elevation-path").transition().duration(y).style("stroke",o.lineColor||"blue").style("stroke-width","".concat(o.lineWidth||3,"px"))}),[o]),Object(a.useEffect)((function(){Object(v.h)(".chart-title").text(W)}),[W]),Object(a.useEffect)((function(){L!=o.lineColor&&F(o.lineColor),W!=o.title&&I(o.title),D!=o.lineWidth&&J(o.lineWidth),G!=o.showElevationLines&&P(o.showElevationLines),K!=o.showDistanceLines&&X(o.showDistanceLines)}),[o]),Object(a.useEffect)((function(){_.current&&_.current.selectAll(".y-axis,.horizontalGrid-start,.horizontalGrid-lowest").transition().duration(y).style("opacity",G?1:0)}),[G]),Object(a.useEffect)((function(){_.current&&_.current.selectAll(".x-axis").transition().duration(y).style("opacity",K?1:0)}),[K]),Object(a.useEffect)((function(){k&&k.datum(c).transition().duration(1e3).attr("fill","none").style("stroke-width","".concat(o.lineWidth,"px"))}),[D]),Object(a.useEffect)((function(){k&&k.datum(c).transition().duration(y).attr("fill","none").style("stroke",o.lineColor)}),[L]),Object(l.jsx)("div",{id:"elevation-chart",ref:u})};n(335);var N=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),s=Object(i.a)(r,2),u=s[0],d=s[1],b=Object(a.useState)({file:"",title:"",lineColor:"#ff0000ad",lineWidth:3,showElevationLines:!0,showDistanceLines:!0,fontSize:14,unit:"standard",aidStations:[{distance:0,size:1,color:"#000000ad"}]}),j=Object(i.a)(b,2),f=j[0],h=j[1],x=Object(a.useState)(!1),m=Object(i.a)(x,2),O=m[0],p=m[1];return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(o,{}),Object(l.jsxs)("div",{className:"flex ",children:[Object(l.jsx)("div",{className:"w-3/12  max-w-md ",children:Object(l.jsx)(g,{onUpload:c,customs:f,setCustoms:h,updateAidStations:d})}),Object(l.jsxs)("main",{className:"w-9/12",children:[O&&Object(l.jsx)("div",{className:"flex justify-end px-8",children:Object(l.jsx)("button",{className:"save-button whitespace-nowrap inline-flex rounded-md bg-blue-500 my-5 py-2 px-10 text-base font-semibold uppercase text-white hover:bg-opacity-90",children:"Save"})}),Object(l.jsx)(w,{elevationData:n,onChartLoad:p,aidStations:u,customs:f})]})]})]})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,338)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(N,{})}),document.getElementById("root")),S()}},[[336,1,2]]]);
//# sourceMappingURL=main.3ba14bed.chunk.js.map