(this.webpackJsonpracestatts=this.webpackJsonpracestatts||[]).push([[0],{148:function(e,t,n){},151:function(e,t){},153:function(e,t,n){},154:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(36),l=n.n(s),i=(n(148),n(2)),r=n(0),o=function(){return Object(r.jsxs)("header",{className:"mb-10 px-10",children:[Object(r.jsx)("h1",{className:"text-4xl",children:"RaceTats"}),Object(r.jsx)("p",{className:"py-4",children:"Upload your race file to create a custom elevation profile."}),Object(r.jsx)("p",{className:"py-4",children:"Then we send you a temporary tatoo for you to use on race day!"})]})},u=n(8),d=n(37),b=n.n(d),j=function(e){var t=e.pt1,n=e.pt2;return h(t.lat,t.lon,n.lat,n.lon)},h=function(e,t,n,c){var a=f(n-e),s=f(c-t);e=f(e),n=f(n);var l=Math.sin(a/2)*Math.sin(a/2)+Math.sin(s/2)*Math.sin(s/2)*Math.cos(e)*Math.cos(n);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},f=function(e){return e*Math.PI/180},x=function(e){var t=e.onUpload,n=e.customs,a=e.setCustoms,s=Object(c.useState)(null),l=Object(i.a)(s,2),o=l[0],d=l[1],h=Object(c.useState)("Crush It!"),f=Object(i.a)(h,2),x=f[0],m=f[1],p=Object(c.useState)(3),O=Object(i.a)(p,2),g=O[0],v=O[1],y=Object(c.useState)("rgba(255,0,0,0.9)"),w=Object(i.a)(y,2),N=w[0],k=w[1],S=Object(c.useState)(n),C=Object(i.a)(S,2),E=C[0],z=C[1];return Object(c.useEffect)((function(){d("null")}),[o]),Object(c.useEffect)((function(){var e=Object(u.a)({},E);E.title=e,z({title:e})}),[x]),Object(c.useEffect)((function(){z(Object(u.a)(Object(u.a)({},E),{},{lineColor:N}))}),[N]),Object(c.useEffect)((function(){z(Object(u.a)(Object(u.a)({},E),{},{lineWidth:g}))}),[g]),Object(c.useEffect)((function(){a(E)}),[E]),Object(c.useEffect)((function(){a(E)}),[E]),Object(r.jsxs)("div",{className:"w-11/12 px-2 shadow-xl h-full",children:[Object(r.jsx)("h2",{className:"text-3xl",children:"Customize"}),Object(r.jsxs)("div",{className:"customize-field my-4",children:[Object(r.jsx)("p",{className:"text-xl  mb-2",children:"Upload File"}),Object(r.jsx)("input",{name:"gps-file",onChange:function(e){var n=e.currentTarget.files[0],c=new FileReader;c.addEventListener("load",(function(e){t(function(e){var t=(new DOMParser).parseFromString(e,"text/xml"),n=b.a.gpx(t).features[0].geometry.coordinates.map((function(e,t,n){return{index:t,elevation:e[2],distance:0===t?0:j({pt1:{lat:n[t][0],lon:n[t][1]},pt2:{lat:n[t-1][0],lon:n[t-1][1]}})}}));return n.forEach((function(e,t,n){return e.distance=0===t?0:e.distance+n[t-1].distance})),n.forEach((function(e,t,n){return e.distance=parseFloat(e.distance.toFixed(3))})),n}(e.target.result))})),c.readAsText(n)},className:"focus:border-light-blue-500 focus:ring-1 focus:ring-light-blue-500 focus:outline-none w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-4",type:"file",placeholder:"race.gpx",accept:".gpx, .kml"})]}),Object(r.jsxs)("div",{className:"customize-field my-4",children:[Object(r.jsx)("p",{className:"text-xl  mb-2",children:"Title"}),Object(r.jsx)("input",{name:"chart-title",className:"focus:border-light-blue-500 focus:ring-1 focus:ring-light-blue-500 focus:outline-none w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-4",type:"text",placeholder:"Crush It!",value:x,onChange:function(e){return m(e.currentTarget.value)}})]}),Object(r.jsxs)("div",{className:"customize-field my-4",children:[Object(r.jsx)("p",{className:"text-xl  mb-2",children:"Line Color"}),Object(r.jsx)("input",{type:"color",name:"line-color",className:"w-4/12 ml-2 h-10",value:N,onChange:function(e){return k(e.currentTarget.value)}})]}),Object(r.jsxs)("div",{className:"customize-field my-4",children:[Object(r.jsx)("p",{className:"text-xl  mb-2",children:"Line Width"}),Object(r.jsx)("input",{name:"line-width",className:"focus:border-light-blue-500 focus:ring-1 focus:ring-light-blue-500 focus:outline-none w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-4",type:"number",placeholder:"3",value:g,onChange:function(e){return v(e.currentTarget.value)}})]}),Object(r.jsxs)("div",{className:"customize-field my-4 ",children:[Object(r.jsx)("p",{className:"text-xl mb-2",children:"Show Elevation Axis"}),Object(r.jsx)("input",{type:"checkbox",name:"show-elevation-axis",value:"yes",className:"opacity-0 absolute h-8 w-8",checked:!0,onChange:function(){}}),Object(r.jsx)("div",{className:"bg-white border-2 rounded-md border-blue-400 w-8 h-8 flex flex-shrink-0 justify-center items-center mr-2 focus-within:border-blue-500",children:Object(r.jsx)("svg",{className:"fill-current hidden w-3 h-3 text-blue-600 pointer-events-none",version:"1.1",viewBox:"0 0 17 12",xmlns:"http://www.w3.org/2000/svg",children:Object(r.jsx)("g",{fill:"none",fillRule:"evenodd",children:Object(r.jsx)("g",{transform:"translate(-9 -11)",fill:"#1F73F1",fillRule:"nonzero",children:Object(r.jsx)("path",{d:"m25.576 11.414c0.56558 0.55188 0.56558 1.4439 0 1.9961l-9.404 9.176c-0.28213 0.27529-0.65247 0.41385-1.0228 0.41385-0.37034 0-0.74068-0.13855-1.0228-0.41385l-4.7019-4.588c-0.56584-0.55188-0.56584-1.4442 0-1.9961 0.56558-0.55214 1.4798-0.55214 2.0456 0l3.679 3.5899 8.3812-8.1779c0.56558-0.55214 1.4798-0.55214 2.0456 0z"})})})})}),Object(r.jsxs)("div",{className:"customize-field my-4 ",children:[Object(r.jsx)("p",{className:"text-xl mb-2",children:"Show Distance Axis"}),Object(r.jsx)("input",{type:"checkbox",name:"show-distance-axis",value:"yes",className:"opacity-0 absolute h-8 w-8",checked:!0,onChange:function(){}}),Object(r.jsx)("div",{className:"bg-white border-2 rounded-md border-blue-400 w-8 h-8 flex flex-shrink-0 justify-center items-center mr-2 focus-within:border-blue-500",children:Object(r.jsx)("svg",{className:"fill-current hidden w-3 h-3 text-blue-600 pointer-events-none",version:"1.1",viewBox:"0 0 17 12",xmlns:"http://www.w3.org/2000/svg",children:Object(r.jsx)("g",{fill:"none",fillRule:"evenodd",children:Object(r.jsx)("g",{transform:"translate(-9 -11)",fill:"#1F73F1",fillRule:"nonzero",children:Object(r.jsx)("path",{d:"m25.576 11.414c0.56558 0.55188 0.56558 1.4439 0 1.9961l-9.404 9.176c-0.28213 0.27529-0.65247 0.41385-1.0228 0.41385-0.37034 0-0.74068-0.13855-1.0228-0.41385l-4.7019-4.588c-0.56584-0.55188-0.56584-1.4442 0-1.9961 0.56558-0.55214 1.4798-0.55214 2.0456 0l3.679 3.5899 8.3812-8.1779c0.56558-0.55214 1.4798-0.55214 2.0456 0z"})})})})}),Object(r.jsxs)("div",{className:"customize-field my-4",children:[Object(r.jsx)("p",{className:"text-xl  mb-2",children:"Font Size"}),Object(r.jsx)("input",{className:"focus:border-light-blue-500 focus:ring-1 focus:ring-light-blue-500 focus:outline-none w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-4",type:"Number"})]}),Object(r.jsxs)("div",{className:"customize-field my-4 ",children:[Object(r.jsx)("p",{className:"text-xl mb-2",children:"Units"}),Object(r.jsxs)("div",{className:"flex justify-around flex-col pl-8",children:[Object(r.jsxs)("div",{className:"flex flex-row items-baseline",children:[Object(r.jsx)("input",{id:"unit-standard",className:"",type:"radio",name:"unit",value:"standard",checked:!0,onChange:function(){}}),Object(r.jsx)("label",{htmlFor:"unit-standard",className:"pl-2 mb-1 text-lg",children:"Standard"})]}),Object(r.jsxs)("div",{className:"flex flex-row items-baseline",children:[Object(r.jsx)("input",{id:"unit-metric",className:"",type:"radio",name:"unit",value:"metric",checked:!0,onChange:function(){}}),Object(r.jsx)("label",{htmlFor:"unit-metric",className:"pl-2 mb-1 text-lg",children:"Metric"})]})]})]})]})]})]})},m=n(3),p=function(e){var t,n,a,s,l,o=e.elevationData,u=e.onChartLoad,d=e.aidStations,b=e.customs,j=Object(c.useRef)(null),h=Object(c.useState)({top:20,right:50,bottom:30,left:50}),f=Object(i.a)(h,2),x=f[0],p=(f[1],Object(c.useState)(0)),O=Object(i.a)(p,2),g=O[0],v=O[1],y=Object(c.useState)(0),w=Object(i.a)(y,2),N=w[0],k=w[1],S=Object(c.useState)(null),C=Object(i.a)(S,2),E=C[0],z=C[1];return Object(c.useEffect)((function(){v(j.current.offsetWidth-x.left-x.right),k(parseInt(""+.3*g)-x.top-x.bottom),t=Object(m.g)().range([0,g]),n=Object(m.g)().range([N,0])})),Object(c.useEffect)((function(){d.forEach((function(e){console.log("-------",e)}))}),[d]),Object(c.useEffect)((function(){if(u(!1),j)return l&&(l.remove(),j.current.innerHTML=""),l=Object(m.h)("#elevation-chart").append("svg").attr("width",g+x.left+x.right).attr("height",N+x.top+x.bottom).append("g").attr("transform","translate("+x.left+","+x.top+")"),a=Object(m.a)().scale(t).ticks(10),s=Object(m.b)().scale(n).ticks(5),o&&o.length&&function(){t.domain([0,Object(m.e)(o,(function(e){return e.distance}))]);var e=Object(m.f)(o,(function(e){return e.elevation})),c=Object(m.e)(o,(function(e){return e.elevation}));n.domain([e-.05*e,1.05*c]),l.append("g").attr("class","x-axis").attr("transform","translate(0,"+N+")").call(a),l.append("g").attr("class","y-axis").call(s),l.append("line").attr({class:"horizontalGrid-start",x1:0,x2:t(o[o.length-1].index),y1:n(o[0].elevation),y2:n(o[0].elevation),fill:"none","shape-rendering":"crispEdges",stroke:"black","stroke-width":"1px","stroke-dasharray":"3, 3"}),l.append("line").attr({class:"horizontalGrid-lowest",x1:0,x2:t(o[o.length-1].index),y1:n(Object(m.f)(o,(function(e){return e.elevation}))),y2:n(Object(m.f)(o,(function(e){return e.elevation}))),fill:"none","shape-rendering":"crispEdges",stroke:"black","stroke-width":"2px","stroke-dasharray":"2, 10"});var i=Object(m.d)().curve(m.c).x((function(e){return t(e.distance)})).y((function(e){return n(e.elevation)}));E||z(l.append("g").append("path").datum(o).attr("d",i).attr("class","elevation-path"));u(!0)}(),function(){l.remove(),j.current.innerHTML=""}}),[o]),Object(c.useEffect)((function(){Object(m.h)(".elevation-path").transition().duration(1e3).style("stroke",b.lineColor||"blue").style("stroke-width","".concat(b.lineWidth||3,"px"))}),[b]),Object(c.useEffect)((function(){E&&E.datum(o).style("fill","none").style("stroke",b.lineColor||"blue").style("stroke-width","".concat(b.lineWidth||5,"px"))}),[E]),Object(r.jsx)("div",{id:"elevation-chart",ref:j})};n(153);var O=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)([]),l=Object(i.a)(s,2),u=l[0],d=l[1],b=Object(c.useState)({file:"",title:"",lineColor:"#ff0000ad",lineWidth:3,showElevationAxis:!0,showDistanceAxis:!0,fontSize:14,unit:"standard",aidStations:[{distance:0,size:1,color:"#000000ad"}]}),j=Object(i.a)(b,2),h=j[0],f=j[1],m=Object(c.useState)(!1),O=Object(i.a)(m,2),g=O[0],v=O[1];return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(o,{}),Object(r.jsxs)("div",{className:"flex ",children:[Object(r.jsx)("div",{className:"w-3/12  max-w-md ",children:Object(r.jsx)(x,{onUpload:a,customs:h,setCustoms:f,updateAidStations:d})}),Object(r.jsxs)("main",{className:"w-9/12",children:[g&&Object(r.jsx)("div",{className:"flex justify-end px-8",children:Object(r.jsx)("button",{className:"save-button whitespace-nowrap inline-flex rounded-md bg-blue-500 my-5 py-2 px-10 text-base font-semibold uppercase text-white hover:bg-opacity-90",children:"Save"})}),Object(r.jsx)(p,{elevationData:n,onChartLoad:v,aidStations:u,customs:h})]})]})]})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,155)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,l=t.getTTFB;n(e),c(e),a(e),s(e),l(e)}))};l.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(O,{})}),document.getElementById("root")),g()}},[[154,1,2]]]);
//# sourceMappingURL=main.ea78e99b.chunk.js.map