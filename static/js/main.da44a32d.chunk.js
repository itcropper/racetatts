(this.webpackJsonpracestatts=this.webpackJsonpracestatts||[]).push([[0],{221:function(e,t,n){},224:function(e,t){},334:function(e,t,n){},335:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(105),i=n.n(s),r=(n(221),n(4)),l=n(3),o=function(){return Object(l.jsxs)("header",{className:"mb-10 px-10",children:[Object(l.jsx)("h1",{className:"text-4xl",children:"RaceTats"}),Object(l.jsx)("p",{className:"py-4",children:"Upload your race file to create a custom elevation profile."}),Object(l.jsx)("p",{className:"py-4",children:"Then we send you a temporary tatoo for you to use on race day!"})]})},u=n(6),d=n(106),b=n.n(d),j=function(e){var t=e.pt1,n=e.pt2;return f(t.lat,t.lon,n.lat,n.lon)},f=function(e,t,n,a){var c=h(n-e),s=h(a-t);e=h(e),n=h(n);var i=Math.sin(c/2)*Math.sin(c/2)+Math.sin(s/2)*Math.sin(s/2)*Math.cos(e)*Math.cos(n);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},h=function(e){return e*Math.PI/180},x=n(37),m=n(63),O=function(e){var t=e.distance,n=void 0===t?0:t,c=e.size,s=void 0===c?0:c,i=e.color,o=void 0===i?"#000000":i,u=e.id,d=e.onUpdate,b=Object(a.useState)(n),j=Object(r.a)(b,2),f=j[0],h=j[1],m=Object(a.useState)(s),O=Object(r.a)(m,2),p=O[0],g=O[1],v=Object(a.useState)(o),y=Object(r.a)(v,2),w=y[0],N=y[1];return Object(a.useEffect)((function(){d({distance:f,size:p,color:w,id:u})}),[f,p,w,u,d]),Object(l.jsxs)("div",{className:"aid-station-row mb-4 items-center flex flex-row ",children:[Object(l.jsxs)("div",{className:"flex flex-col",children:[Object(l.jsxs)("div",{class:"flex flex-row",children:[Object(l.jsx)("input",{className:"py-2 pl-4 w-6/12 mr-2 focus:border-light-blue-500 focus:ring-1 focus:ring-light-blue-500 focus:outline-none w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md",type:"number",placeholder:"Distance",name:"aid-station-distance",onChange:function(e){return h(e.currentTarget.value)}}),Object(l.jsx)("input",{className:"py-2 pl-4 w-2/12 mr-2 focus:border-light-blue-500 focus:ring-1 focus:ring-light-blue-500 focus:outline-none w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md",type:"number",placeholder:"Size",name:"aid-station-size",onChange:function(e){return g(e.currentTarget.value)}})]}),Object(l.jsx)(x.a,{name:"aid-station-color",circleSpacing:20,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5"],className:"circle-picker w-full mr-2 flex justify-between h-20 items-center",value:w,onInput:function(e){return N(e.currentTarget.value)}})]}),Object(l.jsx)("button",{className:"w-1/12",children:"X"})]})},p=function(e){e.updateStations;var t={distance:0,size:1,color:"#000000",id:0},n=Object(a.useState)([t]),c=Object(r.a)(n,2),s=c[0],i=c[1];Object(a.useEffect)((function(){}),[JSON.stringify(s)]);var o=function(e){if(e){var t=s.find((function(t){return t.id===e.id}));t=Object.assign({},t,e);Object(m.a)(s.filter((function(t){return t.id!==e.id})))}};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("p",{className:"text-xl mb-2",children:"Include Aid Stations"}),Object(l.jsx)("div",{className:"aid-stations-container",children:s.map((function(e,t){return Object(l.jsx)(O,{station:e,id:t,onUpdate:o},t)}))}),Object(l.jsx)("button",{className:"add-aid-station whitespace-nowrap inline-flex rounded-md bg-blue-500 py-2 px-3 text-xs font-semibold uppercase text-white hover:bg-opacity-90",onClick:function(e){var n=s.length?Object(u.a)(Object(u.a)({},s.slice(-1)[0]),{},{id:s.length}):t;i([].concat(Object(m.a)(s),[n]))},children:"+ Aid Station"})]})},g=function(e){var t=e.onUpload,n=e.customs,c=e.setCustoms,s=Object(a.useState)(null),i=Object(r.a)(s,2),o=i[0],d=i[1],f=Object(a.useState)(""),h=Object(r.a)(f,2),m=(h[0],h[1],Object(a.useState)(3)),O=Object(r.a)(m,2),g=(O[0],O[1],Object(a.useState)(n.lineColor||"#9c27b0")),v=Object(r.a)(g,2),y=(v[0],v[1],Object(a.useState)(!0)),w=Object(r.a)(y,2),N=(w[0],w[1],Object(a.useState)(!0)),S=Object(r.a)(N,2),k=(S[0],S[1],Object(a.useState)(n)),C=Object(r.a)(k,2),z=C[0],E=C[1],L=Object(a.useState)(n.aidStations),F=Object(r.a)(L,2),M=F[0],T=F[1];return Object(a.useEffect)((function(){d("null")}),[o]),Object(a.useEffect)((function(){c(z)}),[z]),Object(l.jsxs)("div",{className:"w-11/12 px-2 shadow-xl h-full",children:[Object(l.jsx)("h2",{className:"text-3xl",children:"Customize"}),Object(l.jsxs)("div",{className:"customize-field my-4",children:[Object(l.jsx)("p",{className:"text-xl  mb-2",children:"Upload File"}),Object(l.jsx)("input",{name:"gps-file",onChange:function(e){var n=e.currentTarget.files[0],a=new FileReader;a.addEventListener("load",(function(e){t(function(e){var t=(new DOMParser).parseFromString(e,"text/xml"),n=b.a.gpx(t).features[0].geometry.coordinates.map((function(e,t,n){return{index:t,elevation:e[2],distance:0,segmentLength:0===t?0:j({pt1:{lat:n[t][0],lon:n[t][1]},pt2:{lat:n[t-1][0],lon:n[t-1][1]}})}}));return n.forEach((function(e,t,n){return e.distance=e.segmentLength+(0===t?0:n[t-1].distance)})),console.log(n[n.length-1].distance),n.map((function(e,t,n){var a=n[t].distance,c=.621371*a;return Object(u.a)(Object(u.a)({},e),{},{distance:{km:parseFloat(a.toFixed(3)),miles:parseFloat(c.toFixed(3))}})}))}(e.target.result))})),a.readAsText(n)},className:"focus:border-light-blue-500 focus:ring-1 focus:ring-light-blue-500 focus:outline-none w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-4",type:"file",placeholder:"race.gpx",accept:".gpx, .kml"})]}),Object(l.jsxs)("div",{className:"customize-field my-4",children:[Object(l.jsx)("p",{className:"text-xl  mb-2",children:"Title"}),Object(l.jsx)("input",{name:"chart-title",className:"focus:border-light-blue-500 focus:ring-1 focus:ring-light-blue-500 focus:outline-none w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-4",type:"text",placeholder:"Crush It!",onKeyUp:function(e){return E(Object(u.a)(Object(u.a)({},z),{},{title:e.currentTarget.value}))}})]}),Object(l.jsxs)("div",{className:"customize-field my-4",children:[Object(l.jsx)("p",{className:"text-xl  mb-2",children:"Line Color"}),Object(l.jsx)(x.a,{onChange:function(e){return E(Object(u.a)(Object(u.a)({},z),{},{lineColor:e.hex}))}})]}),Object(l.jsxs)("div",{className:"customize-field my-4",children:[Object(l.jsx)("p",{className:"text-xl  mb-2",children:"Line Width"}),Object(l.jsx)("input",{name:"line-width",className:"focus:border-light-blue-500 focus:ring-1 focus:ring-light-blue-500 focus:outline-none w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-4",type:"number",placeholder:"3",onChange:function(e){return E(Object(u.a)(Object(u.a)({},z),{},{lineWidth:e.currentTarget.value}))}})]}),Object(l.jsxs)("div",{className:"customize-field my-4 ",children:[Object(l.jsx)("p",{className:"text-xl mb-2",children:"Show Elevation Axis"}),Object(l.jsx)("input",{type:"checkbox",name:"show-elevation-axis",value:"yes",className:"opacity-0 absolute h-8 w-8",checked:z.showElevationLines,onChange:function(e){return E(Object(u.a)(Object(u.a)({},z),{},{showElevationLines:e.target.checked}))}}),Object(l.jsx)("div",{className:"bg-white border-2 rounded-md border-blue-400 w-8 h-8 flex flex-shrink-0 justify-center items-center mr-2 focus-within:border-blue-500",children:Object(l.jsx)("svg",{className:"fill-current hidden w-3 h-3 text-blue-600 pointer-events-none",version:"1.1",viewBox:"0 0 17 12",xmlns:"http://www.w3.org/2000/svg",children:Object(l.jsx)("g",{fill:"none",fillRule:"evenodd",children:Object(l.jsx)("g",{transform:"translate(-9 -11)",fill:"#1F73F1",fillRule:"nonzero",children:Object(l.jsx)("path",{d:"m25.576 11.414c0.56558 0.55188 0.56558 1.4439 0 1.9961l-9.404 9.176c-0.28213 0.27529-0.65247 0.41385-1.0228 0.41385-0.37034 0-0.74068-0.13855-1.0228-0.41385l-4.7019-4.588c-0.56584-0.55188-0.56584-1.4442 0-1.9961 0.56558-0.55214 1.4798-0.55214 2.0456 0l3.679 3.5899 8.3812-8.1779c0.56558-0.55214 1.4798-0.55214 2.0456 0z"})})})})}),Object(l.jsxs)("div",{className:"customize-field my-4 ",children:[Object(l.jsx)("p",{className:"text-xl mb-2",children:"Show Distance Axis"}),Object(l.jsx)("input",{type:"checkbox",name:"show-distance-axis",value:"yes",className:"opacity-0 absolute h-8 w-8",checked:z.showDistanceLines,onChange:function(e){return E(Object(u.a)(Object(u.a)({},z),{},{showDistanceLines:e.target.checked}))}}),Object(l.jsx)("div",{className:"bg-white border-2 rounded-md border-blue-400 w-8 h-8 flex flex-shrink-0 justify-center items-center mr-2 focus-within:border-blue-500",children:Object(l.jsx)("svg",{className:"fill-current hidden w-3 h-3 text-blue-600 pointer-events-none",version:"1.1",viewBox:"0 0 17 12",xmlns:"http://www.w3.org/2000/svg",children:Object(l.jsx)("g",{fill:"none",fillRule:"evenodd",children:Object(l.jsx)("g",{transform:"translate(-9 -11)",fill:"#1F73F1",fillRule:"nonzero",children:Object(l.jsx)("path",{d:"m25.576 11.414c0.56558 0.55188 0.56558 1.4439 0 1.9961l-9.404 9.176c-0.28213 0.27529-0.65247 0.41385-1.0228 0.41385-0.37034 0-0.74068-0.13855-1.0228-0.41385l-4.7019-4.588c-0.56584-0.55188-0.56584-1.4442 0-1.9961 0.56558-0.55214 1.4798-0.55214 2.0456 0l3.679 3.5899 8.3812-8.1779c0.56558-0.55214 1.4798-0.55214 2.0456 0z"})})})})}),Object(l.jsxs)("div",{className:"customize-field my-4",children:[Object(l.jsx)("p",{className:"text-xl  mb-2",children:"Font Size"}),Object(l.jsx)("input",{className:"focus:border-light-blue-500 focus:ring-1 focus:ring-light-blue-500 focus:outline-none w-full text-sm text-black placeholder-gray-500 border border-gray-200 rounded-md py-2 pl-4",type:"Number"})]}),Object(l.jsxs)("div",{className:"customize-field my-4 ",children:[Object(l.jsx)("p",{className:"text-xl mb-2",children:"Units"}),Object(l.jsxs)("div",{className:"flex justify-around flex-col pl-8",children:[Object(l.jsxs)("div",{className:"flex flex-row items-baseline",children:[Object(l.jsx)("input",{id:"unit-standard",className:"",type:"radio",name:"unit",value:"standard",checked:!0,onChange:function(){}}),Object(l.jsx)("label",{htmlFor:"unit-standard",className:"pl-2 mb-1 text-lg",children:"Standard"})]}),Object(l.jsxs)("div",{className:"flex flex-row items-baseline",children:[Object(l.jsx)("input",{id:"unit-metric",className:"",type:"radio",name:"unit",value:"metric",checked:!0,onChange:function(){}}),Object(l.jsx)("label",{htmlFor:"unit-metric",className:"pl-2 mb-1 text-lg",children:"Metric"})]})]})]}),Object(l.jsx)("div",{className:"customize-field my-4",children:Object(l.jsx)(p,{aidStations:M,updateStations:T})})]})]})]})},v=n(7),y=function(e){var t,n,c,s,i=e.elevationData,o=e.onChartLoad,u=e.aidStations,d=e.customs,b=Object(a.useRef)(null),j=Object(a.useState)({top:20,right:50,bottom:30,left:50}),f=Object(r.a)(j,2),h=f[0],x=(f[1],Object(a.useState)(0)),m=Object(r.a)(x,2),O=m[0],p=m[1],g=Object(a.useState)(0),y=Object(r.a)(g,2),w=y[0],N=y[1],S=Object(a.useState)(null),k=Object(r.a)(S,2),C=k[0],z=k[1],E=Object(a.useState)(d.lineColor||"#ff0000ad"),L=Object(r.a)(E,2),F=L[0],M=L[1],T=Object(a.useState)(d.lineWidth||3),D=Object(r.a)(T,2),A=D[0],W=D[1],R=Object(a.useState)(d.title||""),U=Object(r.a)(R,2),I=U[0],B=U[1],G=Object(a.useState)(d.showElevationLines),P=Object(r.a)(G,2),J=P[0],q=P[1],H=Object(a.useState)(d.showDistanceLines),K=Object(r.a)(H,2),X=K[0],Q=K[1],V=Object(a.useState)("km"),Y=Object(r.a)(V,2),Z=Y[0],$=(Y[1],Object(a.useRef)(null));return Object(a.useEffect)((function(){p(b.current.offsetWidth-h.left-h.right),N(parseInt(""+.3*O)-h.top-h.bottom),t=Object(v.g)().range([0,O]),n=Object(v.g)().range([w,0])})),Object(a.useEffect)((function(){u.forEach((function(e){console.log("-------",e)}))}),[u]),Object(a.useEffect)((function(){if(o(!1),b)return $.current&&($.current.remove(),b.current.innerHTML=""),$.current=Object(v.h)("#elevation-chart").append("svg").attr("width",O+h.left+h.right).attr("height",w+h.top+h.bottom).append("g").attr("transform","translate("+h.left+","+h.top+")"),c=Object(v.a)().scale(t).ticks(10),s=Object(v.b)().scale(n).ticks(5),i&&i.length&&function(){t.domain([0,Object(v.e)(i,(function(e){return e.distance["km"===Z?"km":"miles"]}))]);var e=Object(v.f)(i,(function(e){return e.elevation})),a=Object(v.e)(i,(function(e){return e.elevation}));n.domain([e-.05*e,1.05*a]),$.current.append("g").attr("class","x-axis").attr("transform","translate(0,"+w+")").call(c),$.current.append("g").attr("class","y-axis").call(s),$.current.append("line").attr("class","horizontalGrid-start").attr("x1",0).attr("x2",t(i[i.length-1].index)).attr("y1",n(i[0].elevation)).attr("y2",n(i[0].elevation)).attr("fill","none").attr("stroke","black").attr("stroke-width","1px").attr("stroke-dasharray","3,3"),$.current.append("line").attr("class","horizontalGrid-lowest").attr("x1",0).attr("x2",t(i[i.length-1].index)).attr("y1",n(Object(v.f)(i,(function(e){return e.elevation})))).attr("y2",n(Object(v.f)(i,(function(e){return e.elevation})))).attr("fill","none").attr("stroke","black").attr("stroke-width","2px").attr("stroke-dasharray","2, 10"),$.current.append("text").attr("class","chart-title").attr("x",O/2).attr("text-anchor","middle").style("font-size","24px").text(I);var r=Object(v.d)().curve(v.c).x((function(e){return t(e.distance["km"===Z?"km":"standard"])})).y((function(e){return n(e.elevation)}));C||z($.current.append("g").append("path").datum(i).attr("d",r).attr("stroke","black").attr("stroke-width","3px").attr("fill","none").attr("class","elevation-path"));o(!0)}(),function(){$.current.remove(),b.current.innerHTML=""}}),[i]),Object(a.useEffect)((function(){Object(v.h)(".elevation-path").transition().duration(1e3).style("stroke",d.lineColor||"blue").style("stroke-width","".concat(d.lineWidth||3,"px"))}),[d]),Object(a.useEffect)((function(){Object(v.h)(".chart-title").text(I)}),[I]),Object(a.useEffect)((function(){F!=d.lineColor&&M(d.lineColor),I!=d.title&&B(d.title),A!=d.lineWidth&&W(d.lineWidth),J!=d.showElevationLines&&q(d.showElevationLines),X!=d.showDistanceLines&&Q(d.showDistanceLines)}),[d]),Object(a.useEffect)((function(){$.current&&$.current.selectAll(".y-axis,.horizontalGrid-start,.horizontalGrid-lowest").transition().duration(1e3).style("opacity",J?1:0)}),[J]),Object(a.useEffect)((function(){$.current&&$.current.selectAll(".x-axis").transition().duration(1e3).style("opacity",X?1:0)}),[X]),Object(a.useEffect)((function(){C&&C.datum(i).transition().duration(1e3).attr("fill","none").style("stroke-width","".concat(d.lineWidth,"px"))}),[A]),Object(a.useEffect)((function(){C&&C.datum(i).transition().duration(1e3).attr("fill","none").style("stroke",d.lineColor)}),[F]),Object(l.jsx)("div",{id:"elevation-chart",ref:b})};n(334);var w=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)([]),i=Object(r.a)(s,2),u=i[0],d=i[1],b=Object(a.useState)({file:"",title:"",lineColor:"#ff0000ad",lineWidth:3,showElevationLines:!0,showDistanceLines:!0,fontSize:14,unit:"standard",aidStations:[{distance:0,size:1,color:"#000000ad"}]}),j=Object(r.a)(b,2),f=j[0],h=j[1],x=Object(a.useState)(!1),m=Object(r.a)(x,2),O=m[0],p=m[1];return Object(a.useEffect)((function(){}),[n]),Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(o,{}),Object(l.jsxs)("div",{className:"flex ",children:[Object(l.jsx)("div",{className:"w-3/12  max-w-md ",children:Object(l.jsx)(g,{onUpload:c,customs:f,setCustoms:h,updateAidStations:d})}),Object(l.jsxs)("main",{className:"w-9/12",children:[O&&Object(l.jsx)("div",{className:"flex justify-end px-8",children:Object(l.jsx)("button",{className:"save-button whitespace-nowrap inline-flex rounded-md bg-blue-500 my-5 py-2 px-10 text-base font-semibold uppercase text-white hover:bg-opacity-90",children:"Save"})}),Object(l.jsx)(y,{elevationData:n,onChartLoad:p,aidStations:u,customs:f})]})]})]})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,337)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(w,{})}),document.getElementById("root")),N()}},[[335,1,2]]]);
//# sourceMappingURL=main.da44a32d.chunk.js.map